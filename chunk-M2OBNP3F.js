import{a as l,f as g,sa as f,t as u}from"./chunk-VYEGLGHD.js";import{X as d,aa as o,ab as p,ib as m,k as s}from"./chunk-KZVD5HA2.js";var c=class n{transform(t,e=20){return typeof t!="string"?t:t.length>e?t.substring(0,e)+"...":t}static \u0275fac=function(e){return new(e||n)};static \u0275pipe=m({name:"appCutText",type:n,pure:!0})};var T=class n{constructor(t,e,r,i,a){this.http=t;this.meta=e;this.renderer=r;this.messageService=i;this.translateService=a}readTextFile(t){return this.http.get(t,{responseType:"text"})}updateMetaTags(t,e){let r=this.renderer.createElement("div");r.innerHTML=t,r.querySelectorAll("code, script").forEach(b=>b.remove());let a="JunaPapa",h=(r.textContent||r.innerText||"").trim();this.updateOrCreateMetaTag("author",a),this.updateOrCreateMetaTag("description",new c().transform(h,200)),this.updateOrCreateMetaTag("keywords",e)}extractContent(t){let e=this.renderer.createElement("div");e.innerHTML=t;let r=e.querySelector("img");return{desc:(e.textContent||e.innerText||"").trim(),img:r?.src}}updateOrCreateMetaTag(t,e){this.meta.getTag(`name='${t}'`)?this.meta.updateTag({name:t,content:e}):this.meta.addTag({name:t,content:e})}utf8ToBase64(t){let r=new TextEncoder().encode(t),i="";return r.forEach(a=>{i+=String.fromCharCode(a)}),btoa(i)}imageToBase64(t){return new s(e=>{let r=new FileReader;r.readAsDataURL(t),r.onload=()=>{e.next(r.result),e.complete()},r.onerror=i=>{e.error(i)}})}imageUrlToBase64(t){return new s(e=>{this.http.get(t,{responseType:"blob"}).subscribe(r=>{let i=new FileReader;i.onloadend=()=>{e.next(i.result),e.complete()},i.readAsDataURL(r)})})}base64ToUtf8(t){let e=atob(t),r=new Uint8Array(e.length);for(let a=0;a<e.length;a++)r[a]=e.charCodeAt(a);return new TextDecoder().decode(r)}notify(t,e="",r="info"){this.messageService.add({severity:r,summary:t?this.translateService.instant(t):"",detail:e&&this.translateService.instant(e)})}copyToClipboard(t){if(navigator.clipboard&&navigator.clipboard.writeText)navigator.clipboard.writeText(t).then(()=>{}).catch(e=>{console.error(e)});else{let e=document.createElement("textarea");e.value=t,e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e),e.select();try{document.execCommand("copy")}catch(r){console.error(r)}document.body.removeChild(e)}}readFromClipboard(){return new s(t=>{navigator.clipboard&&navigator.clipboard.readText?navigator.clipboard.readText().then(e=>{t.next(e),t.complete()}).catch(e=>{t.error(e)}):t.error("Clipboard API not supported")})}static \u0275fac=function(e){return new(e||n)(o(l),o(g),o(p),o(f),o(u))};static \u0275prov=d({token:n,factory:n.\u0275fac,providedIn:"root"})};export{c as a,T as b};
