import{a as g,f as u,ta as T,u as f}from"./chunk-CQSSY5IG.js";import{X as p,aa as o,ab as l,ib as m,k as c}from"./chunk-KZVD5HA2.js";var d=class a{transform(t,e=20){return typeof t!="string"?t:t.length>e?t.substring(0,e)+"...":t}static \u0275fac=function(e){return new(e||a)};static \u0275pipe=m({name:"appCutText",type:a,pure:!0})};var h=class a{constructor(t,e,r,i,n){this.http=t;this.meta=e;this.renderer=r;this.messageService=i;this.translateService=n}readTextFile(t){return this.http.get(t,{responseType:"text"})}updateMetaTags(t,e){let r=this.renderer.createElement("div");r.innerHTML=t,r.querySelectorAll("code, script").forEach(b=>b.remove());let n="JunaPapa",s=(r.textContent||r.innerText||"").trim();return this.updateOrCreateMetaTag("author",n),this.updateOrCreateMetaTag("description",new d().transform(s,200)),this.updateOrCreateMetaTag("keywords",e),s.trim().split(/\s+/).length}extractContent(t){let e=this.renderer.createElement("div");e.innerHTML=t,e.querySelectorAll("code, script").forEach(s=>s.remove());let i=e.querySelector("img");return{desc:(e.textContent||e.innerText||"").trim(),img:i?.src}}updateOrCreateMetaTag(t,e){this.meta.getTag(`name='${t}'`)?this.meta.updateTag({name:t,content:e}):this.meta.addTag({name:t,content:e})}utf8ToBase64(t){let r=new TextEncoder().encode(t),i="";return r.forEach(n=>{i+=String.fromCharCode(n)}),btoa(i)}imageToBase64(t){return new c(e=>{let r=new FileReader;r.readAsDataURL(t),r.onload=()=>{e.next(r.result),e.complete()},r.onerror=i=>{e.error(i)}})}imageUrlToBase64(t){return new c(e=>{this.http.get(t,{responseType:"blob"}).subscribe(r=>{let i=new FileReader;i.onloadend=()=>{e.next(i.result),e.complete()},i.readAsDataURL(r)})})}base64ToUtf8(t){let e=atob(t),r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return new TextDecoder().decode(r)}notify(t,e="",r="info"){this.messageService.add({severity:r,summary:t?this.translateService.instant(t):"",detail:e&&this.translateService.instant(e)})}copyToClipboard(t){if(navigator.clipboard&&navigator.clipboard.writeText)navigator.clipboard.writeText(t).then(()=>{}).catch(e=>{console.error(e)});else{let e=document.createElement("textarea");e.value=t,e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e),e.select();try{document.execCommand("copy")}catch(r){console.error(r)}document.body.removeChild(e)}}readFromClipboard(){return new c(t=>{navigator.clipboard&&navigator.clipboard.readText?navigator.clipboard.readText().then(e=>{t.next(e),t.complete()}).catch(e=>{t.error(e)}):t.error("Clipboard API not supported")})}static \u0275fac=function(e){return new(e||a)(o(g),o(u),o(l),o(T),o(f))};static \u0275prov=p({token:a,factory:a.\u0275fac,providedIn:"root"})};export{d as a,h as b};
